{% macro render_field(field) %}
  {%- if field.errors %}
    {{ field(**kwargs) }}
      {% for error in field.errors %}<li>{{ error|e }}</li>{% endfor %}
  {%- else -%}
    {{ field(**kwargs) }}
  {%- endif -%}
{% endmacro %}

{%- macro render_projects(projects, current_user) %}
  {% if projects %}
    {%- for project in projects %}
        <div class="col s12 m6">
          <div class="card">
            <div class="card-content">
              <span class="card-title">{{ project.title.replace("-", " ").title() }}</span>
              <p>{{ project.description }}</p>
            </div>
            <div class="card-action">
              <a href="{{ url_for('project.display', project=project.title.lower().replace(" ", "-")) }}">View</a>
            {% if current_user.is_authenticated and current_user.get_role() == 'admin' -%}

              <a href="{{ url_for('project.edit', project=project.title.replace(" ", "-").lower()) }}">Edit</a>
             {% endif %}
                <a href="{{ url_for('project.sessions', project=project.title.replace(" ", "-").lower()) }}">Sessions</a>
            </div>
          </div>
        </div>
    {% endfor -%}
  {% endif %}
{%- endmacro -%}

{%- macro display_flash_messages() -%}
{%- with messages = get_flashed_messages() -%}
  {% if messages %}
<script>{{ messages | safe }}.forEach(function(e){Materialize.toast(e, 4000)});</script>
{%- endif -%}

{%- endwith -%}
{%- endmacro -%}

{%- macro active(uri="", uri_blueprint_group="") -%}
{% if uri == request.endpoint or request.endpoint.split(".")[0] == uri_blueprint_group %} class="active"{%- endif -%}
{%- endmacro -%}